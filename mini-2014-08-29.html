<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mini_2014-08-29 - Interactive Crossword</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Roboto+Condensed:wght@400;700&display=swap');

/* ===== COLOR TOKEN SYSTEM ===== */

/* Primitive Color Tokens - Raw color values */
:root {
  /* Grayscale */
  --primitive-black: #0a0a0a;
  --primitive-gray-900: #0e0e0e;
  --primitive-gray-800: #1a1a1a;
  --primitive-gray-700: #1e1e1e;
  --primitive-gray-600: #2a2a2a;
  --primitive-gray-500: #2d2d2d;
  --primitive-gray-400: #2e2e2e;
  --primitive-gray-300: #333;
  --primitive-gray-200: #3a3a3a;
  --primitive-gray-100: #4a4a4a;
  --primitive-gray-50: #666;
  
  /* Light grays */
  --primitive-light-gray-300: #b0b0b0;
  --primitive-light-gray-200: #c0c0c0;
  --primitive-light-gray-100: #e0e0e0;
  --primitive-light-gray-50: #e8e8e8;
  --primitive-light-gray-25: #f8f8f8;
  
  /* Nautical Navy palette */
  --primitive-navy-900: #0f172a;
  --primitive-navy-800: #1e293b;
  --primitive-navy-700: #334155;
  --primitive-navy-600: #475569;
  --primitive-navy-500: #64748b;
  --primitive-navy-400: #94a3b8;
  --primitive-navy-300: #cbd5e1;
  --primitive-navy-200: #e2e8f0;
  
  /* Ocean Blue palette */
  --primitive-ocean-900: #0c4a6e;
  --primitive-ocean-800: #075985;
  --primitive-ocean-700: #0369a1;
  --primitive-ocean-600: #0284c7;
  --primitive-ocean-500: #0ea5e9;
  --primitive-ocean-400: #38bdf8;
  --primitive-ocean-300: #7dd3fc;
  --primitive-ocean-200: #bae6fd;
  
  /* Maritime Gold accent */
  --primitive-gold-600: #ca8a04;
  --primitive-gold-500: #eab308;
  --primitive-gold-400: #facc15;
  
  /* Green accents */
  --primitive-green-800: #1e3e1e;
  --primitive-green-700: #2a4a2a;
  --primitive-green-600: #3a5a3a;
  
  /* White */
  --primitive-white: #ffffff;
  
  /* Transparent blacks */
  --primitive-black-alpha-95: rgba(10, 10, 10, 0.95);
  --primitive-black-alpha-60: rgba(0, 0, 0, 0.6);
  --primitive-black-alpha-40: rgba(0, 0, 0, 0.4);
  --primitive-black-alpha-30: rgba(0, 0, 0, 0.3);
  --primitive-black-alpha-20: rgba(0, 0, 0, 0.2);
  --primitive-black-alpha-10: rgba(0, 0, 0, 0.1);
  
  /* Transparent whites */
  --primitive-white-alpha-10: rgba(255, 255, 255, 0.1);
  
  /* Transparent ocean blues */
  --primitive-ocean-alpha-60: rgba(14, 165, 233, 0.6);
  --primitive-ocean-alpha-40: rgba(14, 165, 233, 0.4);
  --primitive-ocean-alpha-30: rgba(14, 165, 233, 0.3);
  
  /* Transparent navy */
  --primitive-navy-alpha-60: rgba(30, 41, 59, 0.6);
  --primitive-navy-alpha-40: rgba(30, 41, 59, 0.4);
  --primitive-navy-alpha-30: rgba(30, 41, 59, 0.3);
  
  /* Transparent grays */
  --primitive-gray-alpha-95: rgba(26, 26, 26, 0.95);
}

/* Semantic Color Tokens - Contextual meanings */
:root {
  /* Background colors */
  --color-background-primary: var(--primitive-gray-800);
  --color-background-secondary: var(--primitive-gray-500);
  --color-background-surface: var(--primitive-gray-600);
  --color-background-surface-secondary: var(--primitive-gray-700);
  --color-background-surface-hover: var(--primitive-gray-200);
  --color-background-surface-hover-secondary: var(--primitive-gray-400);
  --color-background-overlay: var(--primitive-black-alpha-95);
  --color-background-overlay-secondary: var(--primitive-gray-alpha-95);
  --color-background-grid: var(--primitive-black);
  --color-background-cell: var(--primitive-light-gray-25);
  --color-background-cell-secondary: var(--primitive-light-gray-50);
  --color-background-cell-black: var(--primitive-black);
  --color-background-cell-black-secondary: var(--primitive-gray-800);
  --color-background-success: var(--primitive-green-700);
  --color-background-success-secondary: var(--primitive-green-800);
  
  /* Border colors */
  --color-border-primary: var(--primitive-gray-200);
  --color-border-secondary: var(--primitive-gray-600);
  --color-border-cell: var(--primitive-light-gray-200);
  --color-border-cell-black: var(--primitive-gray-600);
  --color-border-selected: var(--primitive-navy-800);
  --color-border-highlighted: var(--primitive-ocean-600);
  --color-border-success: var(--primitive-green-600);
  --color-border-accent-left: var(--primitive-gold-500);
  
  /* Text colors */
  --color-text-primary: var(--primitive-light-gray-100);
  --color-text-secondary: var(--primitive-light-gray-300);
  --color-text-muted: var(--primitive-gray-50);
  --color-text-cell: var(--primitive-gray-800);
  --color-text-cell-number: var(--primitive-gray-300);
  --color-text-accent: var(--primitive-ocean-600);
  --color-text-on-accent: var(--primitive-white);
  --color-text-selected-cell: var(--primitive-black);
  
  /* Interactive states */
  --color-selected-background: var(--primitive-ocean-600);
  --color-selected-background-secondary: var(--primitive-ocean-700);
  --color-selected-background-light: var(--primitive-ocean-200);
  --color-selected-background-light-secondary: var(--primitive-ocean-300);
  --color-selected-border: var(--primitive-navy-800);
  --color-highlighted-background: var(--primitive-ocean-400);
  --color-highlighted-background-secondary: var(--primitive-ocean-500);
  --color-hover-background: var(--primitive-navy-300);
  --color-hover-background-secondary: var(--primitive-navy-600);
  
  /* Shadow colors */
  --color-shadow-primary: var(--primitive-black-alpha-60);
  --color-shadow-secondary: var(--primitive-black-alpha-40);
  --color-shadow-tertiary: var(--primitive-black-alpha-30);
  --color-shadow-quaternary: var(--primitive-black-alpha-20);
  --color-shadow-light: var(--primitive-black-alpha-10);
  --color-shadow-ocean: var(--primitive-ocean-alpha-40);
  --color-shadow-ocean-hover: var(--primitive-ocean-alpha-60);
  --color-shadow-ocean-light: var(--primitive-ocean-alpha-30);
  --color-shadow-navy: var(--primitive-navy-alpha-40);
  --color-shadow-navy-hover: var(--primitive-navy-alpha-60);
  --color-shadow-navy-light: var(--primitive-navy-alpha-30);
  --color-shadow-inset-light: var(--primitive-white-alpha-10);
  
  /* Disabled states */
  --color-disabled-background: var(--primitive-gray-800);
  --color-disabled-background-secondary: var(--primitive-gray-900);
  --color-disabled-text: var(--primitive-gray-50);
  --color-disabled-border: var(--primitive-gray-600);
}

body {
    font-family: 'Roboto Condensed', sans-serif;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(135deg, var(--color-background-primary) 0%, var(--color-background-secondary) 100%);
    color: var(--color-text-primary);
    min-height: 100vh;
}

.container {
    display: flex;
    gap: 30px;
    background: linear-gradient(145deg, var(--color-background-surface), var(--color-background-surface-secondary));
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 8px 32px var(--color-shadow-secondary), inset 0 1px 0 var(--color-shadow-inset-light);
    border: 1px solid var(--color-border-primary);
    justify-content: space-between;
    max-width: 890px;
    margin: 0 auto;
}

.crossword-grid {
    position: relative;
}

.grid {
    display: grid;
    gap: 2px;
    background-color: var(--color-background-grid);
    border: 4px solid var(--color-background-primary);
    width: fit-content;
    border-radius: 8px;
    box-shadow: 0 4px 20px var(--color-shadow-primary);
    /* Grid columns will be set dynamically via JavaScript */
}

.cell {
    width: 76px;
    height: 76px;
    background: linear-gradient(145deg, var(--color-background-cell), var(--color-background-cell-secondary));
    border: 0.5px solid var(--color-border-cell);
    text-align: center;
    font-size: 20px;
    font-weight: 700;
    font-family: 'Oswald', sans-serif;
    text-transform: uppercase;
    position: relative;
    cursor: pointer;
    border-radius: 4px;
    color: var(--color-text-cell);
    transition: all 0.2s ease;
    box-shadow: inset 0 1px 3px var(--color-shadow-light);
}

.cell.black {
    background: linear-gradient(145deg, var(--color-background-cell-black), var(--color-background-cell-black-secondary));
    border: 2px solid var(--color-border-cell-black);
    cursor: default;
}

.cell.selected {
    background: linear-gradient(145deg, var(--color-selected-background-light), var(--color-selected-background-light-secondary));
    border: 2px solid var(--color-selected-border);
    color: var(--color-text-selected-cell);
    box-shadow: 0 0 12px var(--color-shadow-ocean), inset 0 1px 3px var(--color-shadow-quaternary);
}

.cell.highlighted {
    background: linear-gradient(145deg, var(--color-highlighted-background), var(--color-highlighted-background-secondary));
    border: 0.5px solid var(--color-border-highlighted);
    color: var(--color-text-on-accent);
    box-shadow: inset 0 1px 3px var(--color-shadow-light);
}

.cell-number {
    position: absolute;
    top: 2px;
    left: 2px;
    font-size: 10px;
    font-weight: bold;
    color: var(--color-text-cell-number);
    pointer-events: none;
}

.clues-section {
    min-width: 350px;
}

.clues-section.blurred {
    filter: blur(5px);
    pointer-events: none;
    user-select: none;
    transition: filter 0.5s ease;
}

.clues-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.clue-group h3 {
    margin: 0 0 15px 0;
    font-size: 24px;
    color: var(--color-text-accent);
    font-family: 'Oswald', sans-serif;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-bottom: 3px solid var(--color-border-primary);
    padding-bottom: 8px;
    text-shadow: 1px 1px 2px var(--color-shadow-secondary);
}

.clue-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.clue-item {
    padding: 12px 16px;
    margin-bottom: 8px;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s ease;
    background: linear-gradient(145deg, var(--color-background-surface), var(--color-background-surface-secondary));
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
    font-weight: 500;
}

.clue-item:hover {
    background: linear-gradient(145deg, var(--color-background-surface-hover), var(--color-background-surface-hover-secondary));
    border-color: var(--color-border-secondary);
    box-shadow: 0 2px 8px var(--color-shadow-tertiary);
}

.clue-item.selected {
    background: linear-gradient(145deg, var(--color-selected-background), var(--color-selected-background-secondary));
    border: 2px solid var(--color-selected-border);
    color: var(--color-text-on-accent);
    font-weight: 700;
    box-shadow: 0 4px 12px var(--color-shadow-ocean-light);
}

.clue-item.selected .clue-number {
    color: var(--color-text-on-accent);
}

.clue-number {
    font-weight: 700;
    color: var(--color-text-accent);
    font-family: 'Oswald', sans-serif;
}

.title {
    text-align: center;
    margin-bottom: 20px;
    color: var(--color-text-accent);
    font-family: 'Oswald', sans-serif;
    font-size: 2.5em;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 2px 2px 4px var(--color-shadow-secondary);
}

.puzzle-info {
    text-align: center;
    margin-bottom: 20px;
    color: var(--color-text-secondary);
    font-family: 'Roboto Condensed', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.timer-section {
    text-align: center;
    margin-bottom: 20px;
    padding: 20px;
    background: linear-gradient(145deg, var(--color-background-secondary), var(--color-background-primary));
    border-radius: 12px;
    border: 2px solid var(--color-border-primary);
    box-shadow: 0 4px 16px var(--color-shadow-secondary);
}

.timer {
    font-size: 32px;
    font-weight: 700;
    font-family: 'Oswald', sans-serif;
    color: var(--color-text-accent);
    margin-bottom: 15px;
    text-shadow: 1px 1px 2px var(--color-shadow-secondary);
    letter-spacing: 2px;
}

.timer-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    align-items: center;
}

.feedback-toggle {
    margin-top: 10px;
    text-align: center;
}

.feedback-toggle label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: var(--color-text-muted);
    cursor: pointer;
}

.feedback-toggle input[type="checkbox"] {
    margin: 0;
}

button {
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 700;
    font-family: 'Oswald', sans-serif;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-radius: 6px;
    border: 2px solid var(--color-border-primary);
    background: linear-gradient(145deg, var(--color-background-surface), var(--color-background-surface-secondary));
    color: var(--color-text-accent);
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 4px 12px var(--color-shadow-tertiary);
}

button:hover {
    background: linear-gradient(145deg, var(--color-background-surface-hover), var(--color-background-surface-hover-secondary));
    border-color: var(--color-text-accent);
    box-shadow: 0 6px 16px var(--color-shadow-secondary);
    transform: translateY(-1px);
}

button:disabled {
    background: linear-gradient(145deg, var(--color-disabled-background), var(--color-disabled-background-secondary));
    color: var(--color-disabled-text);
    border-color: var(--color-disabled-border);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.completion-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(145deg, var(--color-background-success), var(--color-background-success-secondary));
    color: var(--color-text-accent);
    padding: 30px 40px;
    border-radius: 16px;
    border: 2px solid var(--color-border-success);
    font-size: 22px;
    font-weight: 700;
    font-family: 'Oswald', sans-serif;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-align: center;
    z-index: 1000;
    box-shadow: 0 8px 32px var(--color-shadow-primary);
    display: none;
    text-shadow: 1px 1px 2px var(--color-shadow-secondary);
}

.share-button {
    margin-top: 20px;
    padding: 12px 24px;
    background: linear-gradient(145deg, var(--color-selected-background), var(--color-selected-background-secondary));
    color: var(--color-text-on-accent);
    border: 2px solid var(--color-selected-border);
    border-radius: 8px;
    font-size: 16px;
    font-weight: 700;
    font-family: 'Oswald', sans-serif;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px var(--color-shadow-ocean-light);
}

.share-button:hover {
    background: linear-gradient(145deg, var(--color-hover-background), var(--color-hover-background-secondary));
    transform: translateY(-2px);
    box-shadow: 0 6px 16px var(--color-shadow-ocean);
}

.game-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--color-background-overlay), var(--color-background-overlay-secondary));
    backdrop-filter: blur(15px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    animation: fadeIn 0.5s ease;
}

.overlay-content {
    background: linear-gradient(145deg, var(--color-background-surface), var(--color-background-surface-secondary));
    padding: 50px;
    border-radius: 16px;
    box-shadow: 0 24px 48px var(--color-shadow-primary), inset 0 1px 0 var(--color-shadow-inset-light);
    border: 2px solid var(--color-border-primary);
    text-align: center;
    max-width: 600px;
    animation: slideUp 0.6s ease;
}

.overlay-content h2 {
    margin: 0 0 25px 0;
    font-size: 36px;
    color: var(--color-text-accent);
    font-family: 'Oswald', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 3px;
    text-shadow: 2px 2px 4px var(--color-shadow-secondary);
}

.overlay-content p {
    margin: 0 0 35px 0;
    font-size: 18px;
    color: var(--color-text-secondary);
    line-height: 1.6;
    font-family: 'Roboto Condensed', sans-serif;
    font-weight: 400;
}

.game-features {
    display: grid;
    gap: 18px;
    margin-bottom: 40px;
    text-align: left;
}

.feature {
    padding: 16px 20px;
    background: linear-gradient(145deg, var(--color-disabled-background), var(--color-disabled-background-secondary));
    border-radius: 8px;
    font-size: 16px;
    color: var(--color-text-primary);
    font-family: 'Roboto Condensed', sans-serif;
    font-weight: 500;
    border-left: 4px solid var(--color-border-accent-left);
    border: 1px solid var(--color-border-secondary);
    box-shadow: inset 0 1px 3px var(--color-shadow-tertiary);
}

.start-game-btn {
    padding: 18px 40px;
    font-size: 20px;
    font-weight: 700;
    font-family: 'Oswald', sans-serif;
    text-transform: uppercase;
    letter-spacing: 2px;
    background: linear-gradient(145deg, var(--color-selected-background), var(--color-selected-background-secondary));
    color: var(--color-text-on-accent);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.start-game-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 24px var(--color-shadow-ocean-hover);
    background: linear-gradient(145deg, var(--color-hover-background), var(--color-hover-background-secondary));
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { 
        opacity: 0; 
        transform: translateY(30px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

@media (max-width: 768px) {
    .container {
        flex-direction: column;
        gap: 20px;
    }
}

        
        .grid {
            grid-template-columns: repeat(5, 40px);
        }
    </style>
</head>
<body>
    <h1 class="title">mini 2014-08-29</h1>
    
    <div class="puzzle-info">
        <strong>Date:</strong> 2014-08-29 | <strong>Constructor:</strong> Joel Fagliano
    </div>
    
    <div class="timer-section">
        <div class="timer" id="timer">00:00</div>
        <div class="timer-controls">
            <button id="startBtn">Start</button>
            <button id="pauseBtn" disabled>Pause</button>
            <button id="persistentShareBtn" disabled>📋 Share</button>
        </div>
        <div class="feedback-toggle">
            <label for="feedbackToggle">
                <input type="checkbox" id="feedbackToggle">
                Autocheck
            </label>
        </div>
    </div>
    
    <div class="container">
        <div class="crossword-grid">
            <div id="crossword" class="grid">
                <input class="cell" type="text" maxlength="1" data-index="0"><span class="cell-number">1</span>
<input class="cell" type="text" maxlength="1" data-index="1"><span class="cell-number">2</span>
<input class="cell" type="text" maxlength="1" data-index="2"><span class="cell-number">3</span>
<input class="cell" type="text" maxlength="1" data-index="3"><span class="cell-number">4</span>
<div class="cell black" data-index="4"></div>
<input class="cell" type="text" maxlength="1" data-index="5"><span class="cell-number">5</span>
<input class="cell" type="text" maxlength="1" data-index="6">
<input class="cell" type="text" maxlength="1" data-index="7">
<input class="cell" type="text" maxlength="1" data-index="8">
<input class="cell" type="text" maxlength="1" data-index="9"><span class="cell-number">6</span>
<input class="cell" type="text" maxlength="1" data-index="10"><span class="cell-number">7</span>
<input class="cell" type="text" maxlength="1" data-index="11">
<input class="cell" type="text" maxlength="1" data-index="12">
<input class="cell" type="text" maxlength="1" data-index="13">
<input class="cell" type="text" maxlength="1" data-index="14">
<input class="cell" type="text" maxlength="1" data-index="15"><span class="cell-number">8</span>
<input class="cell" type="text" maxlength="1" data-index="16">
<input class="cell" type="text" maxlength="1" data-index="17">
<input class="cell" type="text" maxlength="1" data-index="18">
<input class="cell" type="text" maxlength="1" data-index="19">
<div class="cell black" data-index="20"></div>
<input class="cell" type="text" maxlength="1" data-index="21"><span class="cell-number">9</span>
<input class="cell" type="text" maxlength="1" data-index="22">
<input class="cell" type="text" maxlength="1" data-index="23">
<input class="cell" type="text" maxlength="1" data-index="24">

            </div>
        </div>
        
        <div class="clues-section">
            <div class="clues-container">
                <div class="clue-group">
            <h3>Across</h3>
            <ul class="clue-list"><li class="clue-item" data-clue-index="0">
                <span class="clue-number">1</span> Final opponent, in video games
            </li><li class="clue-item" data-clue-index="1">
                <span class="clue-number">5</span> Dusty room, typically
            </li><li class="clue-item" data-clue-index="2">
                <span class="clue-number">7</span> "Take it easy, dude"
            </li><li class="clue-item" data-clue-index="3">
                <span class="clue-number">8</span> Convention nametag word
            </li><li class="clue-item" data-clue-index="4">
                <span class="clue-number">9</span> Take a breather
            </li></ul></div><div class="clue-group">
            <h3>Down</h3>
            <ul class="clue-list"><li class="clue-item" data-clue-index="5">
                <span class="clue-number">1</span> Composer described as "the original father of harmony"
            </li><li class="clue-item" data-clue-index="6">
                <span class="clue-number">2</span> Last choice on a questionnaire, often
            </li><li class="clue-item" data-clue-index="7">
                <span class="clue-number">3</span> Subway feature
            </li><li class="clue-item" data-clue-index="8">
                <span class="clue-number">4</span> Places for houseplants
            </li><li class="clue-item" data-clue-index="9">
                <span class="clue-number">6</span> Coagulate
            </li></ul></div>
            </div>
        </div>
    </div>
    
    <div class="completion-message" id="completionMessage">
        <div>🎉 Congratulations! 🎉</div>
        <div>Puzzle completed in <span id="finalTime"></span></div>
        <button id="shareBtn" class="share-button">📋 Share Score</button>
    </div>

    <div class="game-overlay" id="gameOverlay">
        <div class="overlay-content">
            <h2 class="title">Manchat Daily<br /> Crossword Classic</h2>
            <p>A classic crossword challenge.</p>

            <h2>Ready?</h2>
        
            <button class="start-game-btn" id="startGameBtn">Start the Game</button>
        </div>
    </div>

    <script>
        const puzzleData = {
  "board": "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 506 506\" style=\"font-family:helvetica,arial,sans-serif;\"><defs><g id=\"checked\"><path d=\"M103 3 3 103z\" class=\"slash\" /></g><g id=\"modified\"><path d=\"M103 3H69.67L103 36.33z\" class=\"flag\" /></g><g id=\"revealed\"><path d=\"M103 3H69.67L103 36.33z\" class=\"flag\" /><circle cx=\"93.24\" cy=\"12.76\" r=\"4.88\" class=\"tatter\" /></g></defs><g class=\"cells\"><g data-index=\"0\"><path d=\"M3 3h1e2v1e2H3z\" fill=\"none\" class=\"cell\"/><text x=\"5\" y=\"36.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >1</text><text x=\"53\" y=\"94.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"1\"><path d=\"M103 3h1e2v1e2H103z\" fill=\"none\" class=\"cell\"/><text x=\"105\" y=\"36.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >2</text><text x=\"153\" y=\"94.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"2\"><path d=\"M203 3h1e2v1e2H203z\" fill=\"none\" class=\"cell\"/><text x=\"205\" y=\"36.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >3</text><text x=\"253\" y=\"94.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"3\"><path d=\"M303 3h1e2v1e2H303z\" fill=\"none\" class=\"cell\"/><text x=\"305\" y=\"36.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >4</text><text x=\"353\" y=\"94.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"4\"><path d=\"M403 3h1e2v1e2H403z\" fill=\"#000\" class=\"cell\"/></g><g data-index=\"5\"><path d=\"M3 103h1e2v1e2H3z\" fill=\"none\" class=\"cell\"/><text x=\"5\" y=\"136.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >5</text><text x=\"53\" y=\"194.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"6\"><path d=\"M103 103h1e2v1e2H103z\" fill=\"none\" class=\"cell\"/><text x=\"153\" y=\"194.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"7\"><path d=\"M203 103h1e2v1e2H203z\" fill=\"none\" class=\"cell\"/><text x=\"253\" y=\"194.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"8\"><path d=\"M303 103h1e2v1e2H303z\" fill=\"none\" class=\"cell\"/><text x=\"353\" y=\"194.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"9\"><path d=\"M403 103h1e2v1e2H403z\" fill=\"none\" class=\"cell\"/><text x=\"405\" y=\"136.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >6</text><text x=\"453\" y=\"194.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"10\"><path d=\"M3 203h1e2v1e2H3z\" fill=\"none\" class=\"cell\"/><text x=\"5\" y=\"236.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >7</text><text x=\"53\" y=\"294.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"11\"><path d=\"M103 203h1e2v1e2H103z\" fill=\"none\" class=\"cell\"/><text x=\"153\" y=\"294.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"12\"><path d=\"M203 203h1e2v1e2H203z\" fill=\"none\" class=\"cell\"/><text x=\"253\" y=\"294.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"13\"><path d=\"M303 203h1e2v1e2H303z\" fill=\"none\" class=\"cell\"/><text x=\"353\" y=\"294.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"14\"><path d=\"M403 203h1e2v1e2H403z\" fill=\"none\" class=\"cell\"/><text x=\"453\" y=\"294.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"15\"><path d=\"M3 303h1e2v1e2H3z\" fill=\"none\" class=\"cell\"/><text x=\"5\" y=\"336.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >8</text><text x=\"53\" y=\"394.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"16\"><path d=\"M103 303h1e2v1e2H103z\" fill=\"none\" class=\"cell\"/><text x=\"153\" y=\"394.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"17\"><path d=\"M203 303h1e2v1e2H203z\" fill=\"none\" class=\"cell\"/><text x=\"253\" y=\"394.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"18\"><path d=\"M303 303h1e2v1e2H303z\" fill=\"none\" class=\"cell\"/><text x=\"353\" y=\"394.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"19\"><path d=\"M403 303h1e2v1e2H403z\" fill=\"none\" class=\"cell\"/><text x=\"453\" y=\"394.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"20\"><path d=\"M3 403h1e2v1e2H3z\" fill=\"#000\" class=\"cell\"/></g><g data-index=\"21\"><path d=\"M103 403h1e2v1e2H103z\" fill=\"none\" class=\"cell\"/><text x=\"105\" y=\"436.83\" text-anchor=\"start\" font-size=\"33.33\" class=\"label\" >9</text><text x=\"153\" y=\"494.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"22\"><path d=\"M203 403h1e2v1e2H203z\" fill=\"none\" class=\"cell\"/><text x=\"253\" y=\"494.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"23\"><path d=\"M303 403h1e2v1e2H303z\" fill=\"none\" class=\"cell\"/><text x=\"353\" y=\"494.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g><g data-index=\"24\"><path d=\"M403 403h1e2v1e2H403z\" fill=\"none\" class=\"cell\"/><text x=\"453\" y=\"494.67\" text-anchor=\"middle\" font-size=\"66.67\" class=\"guess\"/></g></g><g class=\"grid\"><path d=\"M3 103h5e2M3 203h5e2M3 303h5e2M3 403h5e2M103 3v5e2M203 3v5e2M303 3v5e2M403 3v5e2\" stroke=\"dimgray\" fill=\"none\" vector-effect=\"non-scaling-stroke\" class=\"lines\" /><path d=\"M1.5 1.5h503v503H1.5z\" fill=\"none\" stroke=\"#000\" stroke-width=\"3\" class=\"frame\" /></g></svg>",
  "cells": [
    {
      "answer": "B",
      "clues": [
        0,
        5
      ],
      "label": "1",
      "type": 1
    },
    {
      "answer": "O",
      "clues": [
        0,
        6
      ],
      "label": "2",
      "type": 1
    },
    {
      "answer": "S",
      "clues": [
        0,
        7
      ],
      "label": "3",
      "type": 1
    },
    {
      "answer": "S",
      "clues": [
        0,
        8
      ],
      "label": "4",
      "type": 1
    },
    {},
    {
      "answer": "A",
      "clues": [
        1,
        5
      ],
      "label": "5",
      "type": 1
    },
    {
      "answer": "T",
      "clues": [
        1,
        6
      ],
      "type": 1
    },
    {
      "answer": "T",
      "clues": [
        1,
        7
      ],
      "type": 1
    },
    {
      "answer": "I",
      "clues": [
        1,
        8
      ],
      "type": 1
    },
    {
      "answer": "C",
      "clues": [
        1,
        9
      ],
      "label": "6",
      "type": 1
    },
    {
      "answer": "C",
      "clues": [
        2,
        5
      ],
      "label": "7",
      "type": 1
    },
    {
      "answer": "H",
      "clues": [
        2,
        6
      ],
      "type": 1
    },
    {
      "answer": "I",
      "clues": [
        2,
        7
      ],
      "type": 1
    },
    {
      "answer": "L",
      "clues": [
        2,
        8
      ],
      "type": 1
    },
    {
      "answer": "L",
      "clues": [
        2,
        9
      ],
      "type": 1
    },
    {
      "answer": "H",
      "clues": [
        3,
        5
      ],
      "label": "8",
      "type": 1
    },
    {
      "answer": "E",
      "clues": [
        3,
        6
      ],
      "type": 1
    },
    {
      "answer": "L",
      "clues": [
        3,
        7
      ],
      "type": 1
    },
    {
      "answer": "L",
      "clues": [
        3,
        8
      ],
      "type": 1
    },
    {
      "answer": "O",
      "clues": [
        3,
        9
      ],
      "type": 1
    },
    {},
    {
      "answer": "R",
      "clues": [
        4,
        6
      ],
      "label": "9",
      "type": 1
    },
    {
      "answer": "E",
      "clues": [
        4,
        7
      ],
      "type": 1
    },
    {
      "answer": "S",
      "clues": [
        4,
        8
      ],
      "type": 1
    },
    {
      "answer": "T",
      "clues": [
        4,
        9
      ],
      "type": 1
    }
  ],
  "clueLists": [
    {
      "clues": [
        0,
        1,
        2,
        3,
        4
      ],
      "name": "Across"
    },
    {
      "clues": [
        5,
        6,
        7,
        8,
        9
      ],
      "name": "Down"
    }
  ],
  "clues": [
    {
      "cells": [
        0,
        1,
        2,
        3
      ],
      "direction": "Across",
      "label": "1",
      "text": [
        {
          "plain": "Final opponent, in video games"
        }
      ]
    },
    {
      "cells": [
        5,
        6,
        7,
        8,
        9
      ],
      "direction": "Across",
      "label": "5",
      "text": [
        {
          "plain": "Dusty room, typically"
        }
      ]
    },
    {
      "cells": [
        10,
        11,
        12,
        13,
        14
      ],
      "direction": "Across",
      "label": "7",
      "text": [
        {
          "plain": "\"Take it easy, dude\""
        }
      ]
    },
    {
      "cells": [
        15,
        16,
        17,
        18,
        19
      ],
      "direction": "Across",
      "label": "8",
      "text": [
        {
          "plain": "Convention nametag word"
        }
      ]
    },
    {
      "cells": [
        21,
        22,
        23,
        24
      ],
      "direction": "Across",
      "label": "9",
      "text": [
        {
          "plain": "Take a breather"
        }
      ]
    },
    {
      "cells": [
        0,
        5,
        10,
        15
      ],
      "direction": "Down",
      "label": "1",
      "list": 1,
      "text": [
        {
          "plain": "Composer described as \"the original father of harmony\""
        }
      ]
    },
    {
      "cells": [
        1,
        6,
        11,
        16,
        21
      ],
      "direction": "Down",
      "label": "2",
      "list": 1,
      "text": [
        {
          "plain": "Last choice on a questionnaire, often"
        }
      ]
    },
    {
      "cells": [
        2,
        7,
        12,
        17,
        22
      ],
      "direction": "Down",
      "label": "3",
      "list": 1,
      "text": [
        {
          "plain": "Subway feature"
        }
      ]
    },
    {
      "cells": [
        3,
        8,
        13,
        18,
        23
      ],
      "direction": "Down",
      "label": "4",
      "list": 1,
      "text": [
        {
          "plain": "Places for houseplants"
        }
      ]
    },
    {
      "cells": [
        9,
        14,
        19,
        24
      ],
      "direction": "Down",
      "label": "6",
      "list": 1,
      "text": [
        {
          "plain": "Coagulate"
        }
      ]
    }
  ],
  "dimensions": {
    "height": 5,
    "width": 5
  },
  "SVG": {
    "name": "svg",
    "attributes": [
      {
        "name": "xmlns",
        "value": "http://www.w3.org/2000/svg"
      },
      {
        "name": "viewBox",
        "value": "0 0 506.00 506.00"
      }
    ],
    "children": [
      {
        "name": "defs",
        "children": [
          {
            "name": "g",
            "attributes": [
              {
                "name": "id",
                "value": "checked"
              }
            ],
            "children": [
              {
                "name": "line",
                "attributes": [
                  {
                    "name": "x1",
                    "value": "103.00"
                  },
                  {
                    "name": "y1",
                    "value": "3.00"
                  },
                  {
                    "name": "x2",
                    "value": "3.00"
                  },
                  {
                    "name": "y2",
                    "value": "103.00"
                  },
                  {
                    "name": "class",
                    "value": "slash"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "attributes": [
              {
                "name": "id",
                "value": "modified"
              }
            ],
            "children": [
              {
                "name": "polygon",
                "attributes": [
                  {
                    "name": "points",
                    "value": "103.00,3.00 69.67,3.00 103.00,36.33"
                  },
                  {
                    "name": "class",
                    "value": "flag"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "attributes": [
              {
                "name": "id",
                "value": "revealed"
              }
            ],
            "children": [
              {
                "name": "polygon",
                "attributes": [
                  {
                    "name": "points",
                    "value": "103.00,3.00 69.67,3.00 103.00,36.33"
                  },
                  {
                    "name": "class",
                    "value": "flag"
                  }
                ]
              },
              {
                "name": "circle",
                "attributes": [
                  {
                    "name": "cx",
                    "value": "93.24"
                  },
                  {
                    "name": "cy",
                    "value": "12.76"
                  },
                  {
                    "name": "r",
                    "value": "4.88"
                  },
                  {
                    "name": "class",
                    "value": "tatter"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "name": "g",
        "attributes": [
          {
            "name": "data-group",
            "value": "cells"
          }
        ],
        "children": [
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "3.00"
                  },
                  {
                    "name": "y",
                    "value": "3.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "5.00"
                  },
                  {
                    "name": "y",
                    "value": "36.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "1"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "53.00"
                  },
                  {
                    "name": "y",
                    "value": "94.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "103.00"
                  },
                  {
                    "name": "y",
                    "value": "3.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "105.00"
                  },
                  {
                    "name": "y",
                    "value": "36.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "2"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "153.00"
                  },
                  {
                    "name": "y",
                    "value": "94.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "203.00"
                  },
                  {
                    "name": "y",
                    "value": "3.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "205.00"
                  },
                  {
                    "name": "y",
                    "value": "36.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "3"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "253.00"
                  },
                  {
                    "name": "y",
                    "value": "94.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "303.00"
                  },
                  {
                    "name": "y",
                    "value": "3.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "305.00"
                  },
                  {
                    "name": "y",
                    "value": "36.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "4"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "353.00"
                  },
                  {
                    "name": "y",
                    "value": "94.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "403.00"
                  },
                  {
                    "name": "y",
                    "value": "3.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "black"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "3.00"
                  },
                  {
                    "name": "y",
                    "value": "103.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "5.00"
                  },
                  {
                    "name": "y",
                    "value": "136.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "5"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "53.00"
                  },
                  {
                    "name": "y",
                    "value": "194.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "103.00"
                  },
                  {
                    "name": "y",
                    "value": "103.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "153.00"
                  },
                  {
                    "name": "y",
                    "value": "194.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "203.00"
                  },
                  {
                    "name": "y",
                    "value": "103.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "253.00"
                  },
                  {
                    "name": "y",
                    "value": "194.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "303.00"
                  },
                  {
                    "name": "y",
                    "value": "103.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "353.00"
                  },
                  {
                    "name": "y",
                    "value": "194.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "403.00"
                  },
                  {
                    "name": "y",
                    "value": "103.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "405.00"
                  },
                  {
                    "name": "y",
                    "value": "136.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "6"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "453.00"
                  },
                  {
                    "name": "y",
                    "value": "194.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "3.00"
                  },
                  {
                    "name": "y",
                    "value": "203.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "5.00"
                  },
                  {
                    "name": "y",
                    "value": "236.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "7"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "53.00"
                  },
                  {
                    "name": "y",
                    "value": "294.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "103.00"
                  },
                  {
                    "name": "y",
                    "value": "203.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "153.00"
                  },
                  {
                    "name": "y",
                    "value": "294.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "203.00"
                  },
                  {
                    "name": "y",
                    "value": "203.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "253.00"
                  },
                  {
                    "name": "y",
                    "value": "294.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "303.00"
                  },
                  {
                    "name": "y",
                    "value": "203.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "353.00"
                  },
                  {
                    "name": "y",
                    "value": "294.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "403.00"
                  },
                  {
                    "name": "y",
                    "value": "203.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "453.00"
                  },
                  {
                    "name": "y",
                    "value": "294.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "3.00"
                  },
                  {
                    "name": "y",
                    "value": "303.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "5.00"
                  },
                  {
                    "name": "y",
                    "value": "336.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "8"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "53.00"
                  },
                  {
                    "name": "y",
                    "value": "394.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "103.00"
                  },
                  {
                    "name": "y",
                    "value": "303.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "153.00"
                  },
                  {
                    "name": "y",
                    "value": "394.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "203.00"
                  },
                  {
                    "name": "y",
                    "value": "303.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "253.00"
                  },
                  {
                    "name": "y",
                    "value": "394.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "303.00"
                  },
                  {
                    "name": "y",
                    "value": "303.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "353.00"
                  },
                  {
                    "name": "y",
                    "value": "394.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "403.00"
                  },
                  {
                    "name": "y",
                    "value": "303.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "453.00"
                  },
                  {
                    "name": "y",
                    "value": "394.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "3.00"
                  },
                  {
                    "name": "y",
                    "value": "403.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "black"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "103.00"
                  },
                  {
                    "name": "y",
                    "value": "403.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "105.00"
                  },
                  {
                    "name": "y",
                    "value": "436.83"
                  },
                  {
                    "name": "text-anchor",
                    "value": "start"
                  },
                  {
                    "name": "font-size",
                    "value": "33.33"
                  }
                ],
                "content": "9"
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "153.00"
                  },
                  {
                    "name": "y",
                    "value": "494.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "203.00"
                  },
                  {
                    "name": "y",
                    "value": "403.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "253.00"
                  },
                  {
                    "name": "y",
                    "value": "494.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "303.00"
                  },
                  {
                    "name": "y",
                    "value": "403.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "353.00"
                  },
                  {
                    "name": "y",
                    "value": "494.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          },
          {
            "name": "g",
            "children": [
              {
                "name": "rect",
                "attributes": [
                  {
                    "name": "x",
                    "value": "403.00"
                  },
                  {
                    "name": "y",
                    "value": "403.00"
                  },
                  {
                    "name": "width",
                    "value": "100.00"
                  },
                  {
                    "name": "height",
                    "value": "100.00"
                  },
                  {
                    "name": "fill",
                    "value": "none"
                  }
                ]
              },
              {
                "name": "text",
                "attributes": [
                  {
                    "name": "x",
                    "value": "453.00"
                  },
                  {
                    "name": "y",
                    "value": "494.67"
                  },
                  {
                    "name": "text-anchor",
                    "value": "middle"
                  },
                  {
                    "name": "font-size",
                    "value": "66.67"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "name": "g",
        "attributes": [
          {
            "name": "data-group",
            "value": "grid"
          }
        ],
        "children": [
          {
            "name": "path",
            "attributes": [
              {
                "name": "d",
                "value": "M3.00,103.00 l500.00,0.00 M3.00,203.00 l500.00,0.00 M3.00,303.00 l500.00,0.00 M3.00,403.00 l500.00,0.00 M103.00,3.00 l0.00,500.00 M203.00,3.00 l0.00,500.00 M303.00,3.00 l0.00,500.00 M403.00,3.00 l0.00,500.00"
              },
              {
                "name": "stroke",
                "value": "dimgray"
              },
              {
                "name": "fill",
                "value": "none"
              },
              {
                "name": "vector-effect",
                "value": "non-scaling-stroke"
              }
            ]
          },
          {
            "name": "rect",
            "attributes": [
              {
                "name": "x",
                "value": "1.50"
              },
              {
                "name": "y",
                "value": "1.50"
              },
              {
                "name": "width",
                "value": "503.00"
              },
              {
                "name": "height",
                "value": "503.00"
              },
              {
                "name": "fill",
                "value": "none"
              },
              {
                "name": "stroke",
                "value": "black"
              },
              {
                "name": "stroke-width",
                "value": "3.00"
              }
            ]
          }
        ]
      }
    ],
    "styles": [
      {
        "name": "font-family",
        "value": "helvetica,arial,sans-serif"
      }
    ]
  }
};
        
        class CrosswordPuzzle {
    constructor(puzzleData) {
        this.puzzle = puzzleData;
        this.selectedCell = null;
        this.selectedClue = null;
        this.userAnswers = {};
        this.startTime = null;
        this.elapsedTime = 0;
        this.timerAnimationId = null;
        this.isRunning = false;
        this.isPaused = false;
        this.showFeedback = false; // Feedback is disabled by default
        this.gameStarted = false; // Track if game has been started
        this.init();
    }
    
    init() {
        this.setupGrid();
        this.setupTimer();
        this.setupEventListeners();
        this.blurClues();
        this.showGameOverlay();
    }
    
    blurClues() {
        const cluesSection = document.querySelector('.clues-section');
        if (cluesSection) {
            cluesSection.classList.add('blurred');
        }
    }
    
    unblurClues() {
        const cluesSection = document.querySelector('.clues-section');
        if (cluesSection) {
            cluesSection.classList.remove('blurred');
        }
    }
    
    showGameOverlay() {
        const overlay = document.getElementById('gameOverlay');
        if (overlay) {
            overlay.style.display = 'flex';
            // Setup start button event listener
            const startBtn = document.getElementById('startGameBtn');
            if (startBtn) {
                startBtn.addEventListener('click', () => this.startGame());
            }
        }
    }
    
    hideGameOverlay() {
        const overlay = document.getElementById('gameOverlay');
        if (overlay) {
            overlay.style.animation = 'fadeOut 0.3s ease';
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 300);
        }
    }
    
    showPauseOverlay() {
        const overlay = document.getElementById('gameOverlay');
        if (overlay) {
            // Update overlay content for pause state
            const overlayContent = overlay.querySelector('.overlay-content');
            if (overlayContent) {
                overlayContent.innerHTML = `
                    <h2>Game Paused ⏸️</h2>
                    <p>Your progress is saved. Click "Resume" to continue your puzzle.</p>
                    <button class="start-game-btn" onclick="crosswordInstance.resumeFromPause()">Resume Game</button>
                `;
            }
            overlay.style.display = 'flex';
            overlay.style.animation = 'fadeIn 0.3s ease';
        }
    }
    
    resumeFromPause() {
        this.startTimer();
    }
    
    startGame() {
        this.gameStarted = true;
        this.hideGameOverlay();
        this.unblurClues();
        this.startTimer();
        this.focusFirstAcrossWord();
    }
    
    focusFirstAcrossWord() {
        // Find the first clue in the 'across' direction
        const acrossClueList = this.puzzle.clueLists.find(list => 
            list.name.toLowerCase() === 'across'
        );
        
        if (acrossClueList && acrossClueList.clues && acrossClueList.clues.length > 0) {
            const firstAcrossClueIndex = acrossClueList.clues[0];
            this.selectClue(firstAcrossClueIndex);
        }
    }
    
    setupGrid() {
        // Set the grid columns dynamically based on puzzle width
        const grid = document.querySelector('.grid');
        if (grid && this.puzzle.dimensions) {
            grid.style.gridTemplateColumns = `repeat(${this.puzzle.dimensions.width}, 80px)`;
        }
    }
    
    setupTimer() {
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const persistentShareBtn = document.getElementById('persistentShareBtn');
        const feedbackToggle = document.getElementById('feedbackToggle');
        
        startBtn.addEventListener('click', () => this.startTimer());
        pauseBtn.addEventListener('click', () => this.pauseTimer());
        
        if (persistentShareBtn) {
            persistentShareBtn.addEventListener('click', () => this.shareScore());
        }
        
        if (feedbackToggle) {
            feedbackToggle.addEventListener('change', (e) => this.toggleFeedback(e.target.checked));
        }
    }
    
    startTimer() {
        if (!this.isRunning) {
            this.startTime = Date.now() - this.elapsedTime;
            this.isRunning = true;
            this.isPaused = false;
        } else if (this.isPaused) {
            this.startTime = Date.now() - this.elapsedTime;
            this.isPaused = false;
        }
        
        // Remove blur from clues when starting and hide any overlays
        this.unblurClues();
        this.hideGameOverlay();
        
        this.startTimerAnimation();
        
        document.getElementById('startBtn').disabled = true;
        document.getElementById('pauseBtn').disabled = false;
    }
    
    startTimerAnimation() {
        if (this.timerAnimationId) {
            cancelAnimationFrame(this.timerAnimationId);
        }
        
        let lastSeconds = -1;
        
        const animate = () => {
            if (!this.isPaused && this.isRunning) {
                this.elapsedTime = Date.now() - this.startTime;
                
                // Only update display when seconds change to avoid unnecessary DOM updates
                const currentSeconds = Math.floor(this.elapsedTime / 1000);
                if (currentSeconds !== lastSeconds) {
                    this.updateTimerDisplay();
                    lastSeconds = currentSeconds;
                }
                
                this.timerAnimationId = requestAnimationFrame(animate);
            }
        };
        
        this.timerAnimationId = requestAnimationFrame(animate);
    }
    
    pauseTimer() {
        if (this.timerAnimationId) {
            cancelAnimationFrame(this.timerAnimationId);
            this.timerAnimationId = null;
        }
        this.isPaused = true;
        
        // Show overlay and blur clues when paused
        this.showPauseOverlay();
        this.blurClues();
        
        document.getElementById('startBtn').disabled = false;
        document.getElementById('pauseBtn').disabled = true;
    }
    
    updateTimerDisplay() {
        const minutes = Math.floor(this.elapsedTime / 60000);
        const seconds = Math.floor((this.elapsedTime % 60000) / 1000);
        const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        document.getElementById('timer').textContent = display;
    }
    
    formatTime(milliseconds) {
        const minutes = Math.floor(milliseconds / 60000);
        const seconds = Math.floor((milliseconds % 60000) / 1000);
        return `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }
    
    toggleFeedback(enabled) {
        this.showFeedback = enabled;
        // Update all existing cells to show/hide feedback
        this.updateAllCellsFeedback();
    }
    
    updateAllCellsFeedback() {
        const cells = document.querySelectorAll('.cell');
        cells.forEach((cellElement, index) => {
            const cell = this.puzzle.cells[index];
            const userAnswer = this.userAnswers[index];
            
            if (cell && userAnswer) {
                if (this.showFeedback) {
                    // Show feedback colors - use background property to override CSS gradients
                    if (cell.answer === userAnswer) {
                        cellElement.style.setProperty('background', '#c8e6c9', 'important');
                    } else {
                        cellElement.style.setProperty('background', '#ffcdd2', 'important');
                    }
                } else {
                    // Remove feedback colors
                    cellElement.style.removeProperty('background');
                }
            }
        });
    }
    
    setupEventListeners() {
        document.addEventListener('keydown', (e) => {
            this.handleKeyPress(e);
        });
        
        // Setup cell event listeners
        document.querySelectorAll('.cell:not(.black)').forEach((cell, index) => {
            const cellIndex = parseInt(cell.dataset.index);
            cell.addEventListener('click', (e) => this.handleCellClick(cellIndex));
            cell.addEventListener('input', (e) => this.handleInput(e, cellIndex));
        });
        
        // Setup clue event listeners
        document.querySelectorAll('.clue-item').forEach(item => {
            const clueIndex = parseInt(item.dataset.clueIndex);
            item.addEventListener('click', () => this.selectClue(clueIndex));
        });
    }
    
    getClueDirection(clueIndex) {
        // Find which direction list contains this clue
        for (const clueList of this.puzzle.clueLists) {
            if (clueList.clues.includes(clueIndex)) {
                return clueList.name.toLowerCase(); // "across" or "down"
            }
        }
        return null;
    }
    
    selectCell(index, forceToggle = false) {
        const cells = document.querySelectorAll('.cell');
        const clueItems = document.querySelectorAll('.clue-item');
        const cell = this.puzzle.cells[index];
        
        if (!cell || !cell.clues || cell.clues.length === 0) {
            return; // Invalid cell
        }
        
        let targetClueIndex = null;
        
        if (forceToggle && this.selectedClue !== null && cell.clues.includes(this.selectedClue) && cell.clues.length > 1) {
            // Explicit toggle request - switch to the other clue
            targetClueIndex = cell.clues.find(clueIndex => clueIndex !== this.selectedClue);
        } else if (this.selectedClue !== null && cell.clues.includes(this.selectedClue)) {
            // Cell is part of current word - keep the same word selected
            targetClueIndex = this.selectedClue;
        } else {
            // New cell - try to maintain direction, or use first clue
            if (this.selectedClue !== null) {
                const currentDirection = this.getClueDirection(this.selectedClue);
                // Look for a clue in the same direction
                targetClueIndex = cell.clues.find(clueIndex => 
                    this.getClueDirection(clueIndex) === currentDirection
                ) || cell.clues[0];
            } else {
                // No previous selection
                targetClueIndex = cell.clues[0];
            }
        }
        
        // Clear previous selections
        cells.forEach(cell => cell.classList.remove('selected', 'highlighted'));
        clueItems.forEach(item => item.classList.remove('selected'));
        
        // Set new selection
        this.selectedCell = index;
        this.selectedClue = targetClueIndex;
        
        cells[index].classList.add('selected');
        cells[index].focus();
        cells[index].select(); // Auto-select existing text for easy replacement
        
        // Highlight the word and clue
        if (targetClueIndex !== null) {
            this.highlightWord(targetClueIndex);
            const clueItem = document.querySelector(`[data-clue-index="${targetClueIndex}"]`);
            if (clueItem) {
                clueItem.classList.add('selected');
            }
        }
        
        // Start timer on first interaction (only if game has been started)
        if (this.gameStarted && !this.isRunning && !this.isPaused) {
            this.startTimer();
        }
    }
    
    handleCellClick(index) {
        const cell = this.puzzle.cells[index];
        
        // Check if this is a click on the same cell that's already selected
        // and the cell has multiple clues (crossing words)
        if (this.selectedCell === index && 
            this.selectedClue !== null && 
            cell && cell.clues && 
            cell.clues.includes(this.selectedClue) && 
            cell.clues.length > 1) {
            // Toggle to the crossing word
            this.selectCell(index, true);
        } else {
            // Normal selection
            this.selectCell(index, false);
        }
    }
    
    selectClue(clueIndex) {
        const clueItems = document.querySelectorAll('.clue-item');
        clueItems.forEach(item => item.classList.remove('selected'));
        
        const cells = document.querySelectorAll('.cell');
        cells.forEach(cell => cell.classList.remove('selected', 'highlighted'));
        
        this.selectedClue = clueIndex;
        
        const clueItem = document.querySelector(`[data-clue-index="${clueIndex}"]`);
        if (clueItem) {
            clueItem.classList.add('selected');
        }
        
        this.highlightWord(clueIndex);
        
        // Focus on first unfilled cell of the word, or first cell if all filled
        const clue = this.puzzle.clues[clueIndex];
        let targetCellIndex = clue.cells[0]; // default to first cell
        
        // Find first unfilled cell
        for (const cellIndex of clue.cells) {
            if (!this.userAnswers[cellIndex]) {
                targetCellIndex = cellIndex;
                break;
            }
        }
        
        const targetCell = cells[targetCellIndex];
        if (targetCell) {
            targetCell.focus();
            targetCell.select(); // Auto-select existing text for easy replacement
            this.selectedCell = targetCellIndex;
            targetCell.classList.add('selected');
        }
        
        // Start timer on first interaction (only if game has been started)
        if (this.gameStarted && !this.isRunning && !this.isPaused) {
            this.startTimer();
        }
    }
    
    highlightWord(clueIndex) {
        const clue = this.puzzle.clues[clueIndex];
        const cells = document.querySelectorAll('.cell');
        
        clue.cells.forEach(cellIndex => {
            if (cells[cellIndex]) {
                cells[cellIndex].classList.add('highlighted');
            }
        });
    }
    
    handleInput(event, cellIndex) {
        const value = event.target.value.toUpperCase();
        const cell = this.puzzle.cells[cellIndex];
        
        if (value && value.match(/[A-Z]/)) {
            this.userAnswers[cellIndex] = value;
            event.target.value = value;
            
            // Only show feedback if enabled
            if (this.showFeedback && cell) {
                if (cell.answer === value) {
                    event.target.style.setProperty('background', '#c8e6c9', 'important');
                } else {
                    event.target.style.setProperty('background', '#ffcdd2', 'important');
                }
            } else {
                event.target.style.removeProperty('background');
            }
            
            // Check for puzzle completion
            this.checkPuzzleCompletion();
            
            // Move to next cell
            this.moveToNextCell(cellIndex);
        } else {
            event.target.value = '';
            delete this.userAnswers[cellIndex];
            event.target.style.removeProperty('background');
        }
    }
    
    checkPuzzleCompletion() {
        let allCorrect = true;
        let allFilled = true;
        
        this.puzzle.cells.forEach((cell, index) => {
            if (cell && Object.keys(cell).length > 0) {
                const userAnswer = this.userAnswers[index];
                if (!userAnswer) {
                    allFilled = false;
                } else if (userAnswer !== cell.answer) {
                    allCorrect = false;
                }
            }
        });
        
        if (allFilled && allCorrect) {
            this.onPuzzleComplete();
        }
    }
    
    onPuzzleComplete() {
        // Stop the timer
        if (this.timerAnimationId) {
            cancelAnimationFrame(this.timerAnimationId);
            this.timerAnimationId = null;
        }
        this.isRunning = false;
        this.isPaused = true;
        
        // Show completion message
        const completionMessage = document.getElementById('completionMessage');
        const finalTime = document.getElementById('finalTime');
        finalTime.textContent = this.formatTime(this.elapsedTime);
        completionMessage.style.display = 'block';
        
        // Setup share button
        const shareBtn = document.getElementById('shareBtn');
        shareBtn.addEventListener('click', () => this.shareScore());
        
        // Hide completion message after 5 seconds
        setTimeout(() => {
            completionMessage.style.display = 'none';
        }, 5000);
        
        document.getElementById('startBtn').disabled = true;
        document.getElementById('pauseBtn').disabled = true;
        
        // Enable the persistent share button
        const persistentShareBtn = document.getElementById('persistentShareBtn');
        if (persistentShareBtn) {
            persistentShareBtn.disabled = false;
        }
    }
    
    shareScore() {
        const puzzleTitle = document.querySelector('.title').textContent;
        const completionTime = this.formatTime(this.elapsedTime);
        const puzzleDate = puzzleTitle.split(' ')[1]; // Extract date from title like "mini 2014-08-21"
        
        // Check if puzzle is actually completed
        if (!this.elapsedTime || this.elapsedTime === 0) {
            this.showPersistentShareFeedback('Complete the puzzle first!');
            return;
        }
        
        const shareText = `🧩 ${puzzleTitle} completed!\n⏱️ Time: ${completionTime}\n\n`;
        
        // Try to use the modern Clipboard API
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(shareText).then(() => {
                this.showPersistentShareFeedback('Score copied to clipboard!');
            }).catch(() => {
                this.fallbackCopyToClipboard(shareText);
            });
        } else {
            // Fallback for older browsers or non-HTTPS contexts
            this.fallbackCopyToClipboard(shareText);
        }
    }
    
    fallbackCopyToClipboard(text) {
        // Create a temporary textarea element
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
            document.execCommand('copy');
            this.showPersistentShareFeedback('Score copied to clipboard!');
        } catch (err) {
            this.showPersistentShareFeedback('Unable to copy to clipboard');
        }
        
        document.body.removeChild(textArea);
    }
    
    showCopyFeedback(message) {
        const shareBtn = document.getElementById('shareBtn');
        const originalText = shareBtn.textContent;
        shareBtn.textContent = message;
        shareBtn.style.backgroundColor = 'rgba(255, 255, 255, 0.4)';
        
        setTimeout(() => {
            shareBtn.textContent = originalText;
            shareBtn.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
        }, 2000);
    }
    
    showPersistentShareFeedback(message) {
        const persistentShareBtn = document.getElementById('persistentShareBtn');
        if (!persistentShareBtn) return;
        
        const originalText = persistentShareBtn.textContent;
        persistentShareBtn.textContent = message;
        
        setTimeout(() => {
            persistentShareBtn.textContent = originalText;
        }, 2000);
    }
    
    moveToNextCell(currentIndex) {
        if (this.selectedClue !== null) {
            const clue = this.puzzle.clues[this.selectedClue];
            const currentPosition = clue.cells.indexOf(currentIndex);
            
            if (currentPosition >= 0 && currentPosition < clue.cells.length - 1) {
                // Look for the next empty cell in the current word
                let nextEmptyCellIndex = null;
                
                for (let i = currentPosition + 1; i < clue.cells.length; i++) {
                    const cellIndex = clue.cells[i];
                    if (!this.userAnswers[cellIndex]) {
                        nextEmptyCellIndex = cellIndex;
                        break;
                    }
                }
                
                if (nextEmptyCellIndex !== null) {
                    // Found an empty cell, move to it
                    this.moveToCell(nextEmptyCellIndex);
                } else {
                    // All remaining cells in this word are filled, move to next word
                    this.moveToNextWord();
                }
            } else if (currentPosition === clue.cells.length - 1) {
                // We're at the last cell of the current word, move to next word
                this.moveToNextWord();
            }
        }
    }
    
    moveToCell(index) {
        // Simple cell movement without changing word selection
        const cells = document.querySelectorAll('.cell');
        
        // Remove selected class from current cell
        cells.forEach(cell => cell.classList.remove('selected'));
        
        // Set new selected cell
        this.selectedCell = index;
        cells[index].classList.add('selected');
        cells[index].focus();
        cells[index].select(); // Auto-select existing text for easy replacement
    }
    
    moveToNextWord() {
        if (this.selectedClue === null) return;
        
        const currentDirection = this.getClueDirection(this.selectedClue);
        
        // Check if current word is the last in its direction sequence
        if (this.isLastWordInDirection(this.selectedClue, currentDirection)) {
            // Move to first word of opposite direction
            const oppositeDirection = currentDirection === 'across' ? 'down' : 'across';
            const firstWordClueIndex = this.findFirstWordInDirection(oppositeDirection);
            
            if (firstWordClueIndex !== null) {
                this.selectClue(firstWordClueIndex);
                return;
            }
        }
        
        // Otherwise, find next unfilled word in current direction
        const nextWordClueIndex = this.findNextUnfilledWord(currentDirection);
        
        if (nextWordClueIndex !== null) {
            // Found next unfilled word in current direction
            this.selectClue(nextWordClueIndex);
        } else {
            // No more unfilled words in current direction, switch to opposite direction
            const oppositeDirection = currentDirection === 'across' ? 'down' : 'across';
            const oppositeWordClueIndex = this.findNextUnfilledWord(oppositeDirection);
            
            if (oppositeWordClueIndex !== null) {
                this.selectClue(oppositeWordClueIndex);
            }
        }
    }
    
    findNextUnfilledWord(direction) {
        // Get the clue list for the specified direction
        const clueList = this.puzzle.clueLists.find(list => 
            list.name.toLowerCase() === direction.toLowerCase()
        );
        
        if (!clueList) return null;
        
        // Find the current clue index in the direction's clue list
        const currentClueIndex = this.selectedClue;
        const currentPositionInList = clueList.clues.indexOf(currentClueIndex);
        
        // Look for next unfilled word starting from current position + 1
        for (let i = currentPositionInList + 1; i < clueList.clues.length; i++) {
            const clueIndex = clueList.clues[i];
            if (this.isWordUnfilled(clueIndex)) {
                return clueIndex;
            }
        }
        
        // If we didn't find one after current position, look from beginning
        for (let i = 0; i <= currentPositionInList; i++) {
            const clueIndex = clueList.clues[i];
            if (this.isWordUnfilled(clueIndex)) {
                return clueIndex;
            }
        }
        
        return null;
    }
    
    isWordUnfilled(clueIndex) {
        const clue = this.puzzle.clues[clueIndex];
        if (!clue || !clue.cells) return false;
        
        // Check if any cell in the word is empty
        return clue.cells.some(cellIndex => !this.userAnswers[cellIndex]);
    }
    
    isLastWordInDirection(clueIndex, direction) {
        const clueList = this.puzzle.clueLists.find(list => 
            list.name.toLowerCase() === direction.toLowerCase()
        );
        
        if (!clueList) return false;
        
        // Check if this clue is the last one in the direction's clue list
        return clueList.clues[clueList.clues.length - 1] === clueIndex;
    }
    
    findFirstWordInDirection(direction) {
        const clueList = this.puzzle.clueLists.find(list => 
            list.name.toLowerCase() === direction.toLowerCase()
        );
        
        if (!clueList || clueList.clues.length === 0) return null;
        
        // Return the first clue in the direction
        return clueList.clues[0];
    }
    
    handleKeyPress(event) {
        if (this.selectedCell === null) return;
        
        const { width, height } = this.puzzle.dimensions;
        const currentRow = Math.floor(this.selectedCell / width);
        const currentCol = this.selectedCell % width;
        
        let nextIndex = null;
        
        switch (event.key) {
            case 'Tab':
                // Move to next word in current direction, or switch direction if at end
                this.moveToNextWord();
                event.preventDefault();
                break;
            case 'ArrowUp':
                if (currentRow > 0) {
                    nextIndex = this.selectedCell - width;
                }
                break;
            case 'ArrowDown':
                if (currentRow < height - 1) {
                    nextIndex = this.selectedCell + width;
                }
                break;
            case 'ArrowLeft':
                if (currentCol > 0) {
                    nextIndex = this.selectedCell - 1;
                }
                break;
            case 'ArrowRight':
                if (currentCol < width - 1) {
                    nextIndex = this.selectedCell + 1;
                }
                break;
            case 'Backspace':
                const currentCell = document.querySelector(`[data-index="${this.selectedCell}"]`);
                if (currentCell && currentCell.value) {
                    currentCell.value = '';
                    delete this.userAnswers[this.selectedCell];
                    currentCell.style.removeProperty('background');
                } else if (this.selectedClue !== null) {
                    // Move to previous cell in word
                    const clue = this.puzzle.clues[this.selectedClue];
                    const currentPosition = clue.cells.indexOf(this.selectedCell);
                    if (currentPosition > 0) {
                        const prevCellIndex = clue.cells[currentPosition - 1];
                        this.moveToCell(prevCellIndex);
                    }
                }
                event.preventDefault();
                break;
        }
        
        if (nextIndex !== null) {
            const nextCell = this.puzzle.cells[nextIndex];
            if (nextCell && Object.keys(nextCell).length > 0) {
                this.selectCell(nextIndex);
            }
            event.preventDefault();
        }
    }
}

// Initialize the crossword puzzle when the page loads
let crosswordInstance;
window.addEventListener('DOMContentLoaded', () => {
    if (typeof puzzleData !== 'undefined') {
        crosswordInstance = new CrosswordPuzzle(puzzleData);
    }
});

    </script>
</body>
</html>